<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="Shortcut icon" href="images/site.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Maverick CRM</title>
    <link rel="stylesheet" type="text/css" href="maverickcrm.css?9">
    <script src="scripts/modelData.js"></script>
    <script src="scripts/common.js?10"></script>
    <script src="scripts/dataPopulation.js?16"></script>
    <script src="scripts/maverickcrm.js?17"></script>
    <script src="scripts/tabHandler.js?15"></script>
    <script src="scripts/modelHandler.js?8"></script>

</head>
<body onload="init()">
	<input type="hidden" value="" id="user" data-contact="">
    <table id="menu">
        <tr>
            <td width="10%">
                <select class="cssMenu" id="cmbSearchCustomer" title="Customer list" onchange="setSearchPredicate(this)"></select>                
			</td>
            <td width="10%">
                <select class="cssMenu" title="Project list" id="cmbSearchProject" onchange="setSearchPredicate(this)"></select>
			</td>
            <td width="10%">
                <select class="cssMenu" title="Task Type" id="cmbSearchTaskType" onchange="setSearchPredicate(this)"></select>                
            </td>
            <td width="5%">
                <input type="text" class="cssMenu" size="15" title="Title" placeholder="task title" id="txtSearchTitle" onchange="setSearchPredicate(this)">            
            </td> 
            <td width="15%">
            	<span style="float:left;">Due:&nbsp;</span>
            	<span id="lblSearchDueDate" title="Set due date" onclick="toggleSearchDate(this, getById('txtSearchDueDate'))">date not selected</span>
                <input class="cssMenu" type="date" title="Task Due Date" id="txtSearchDueDate" data-isActive="0" onkeyup="flagToggle(getById('lblSearchDueDate'),this, event)" onblur="toggleSearchDate(getById('lblSearchDueDate'), getById('txtSearchDueDate'))" onchange="toggleSearchDate(getById('lblSearchDueDate'),this)"/>
            </td> 
            <td width="10%"> 	
            	<img src="images/task_open.png" style="margin-left:0.2em; margin-right:0.2em" id="searchTaskStatus"  data-state="0" title = 'Open tasks' onclick="toggleSearchTaskStatus(this)">
            	<img src="images/task_search.png" style="margin-left:0.2em; margin-right:0.2em; borderStyle:inset;" id="searchTask"  title="Search tasks" onmousedown="toggleAsBotton(this)" onmouseup="searchTask(prepareSearchTask());toggleAsBotton(this)">
            	<img src="images/refresh_search.png" style="margin-left:0.2em; margin-right:0.2em" title="Reset search (all open tasks)" id="resetSearch" onmousedown="toggleAsBotton(this)" onmouseup="resetTaskSearch();toggleAsBotton(this)">
            </td>
            <td width="15%" align="right" valign="bottom">
            	<img src="images/logout.png" style="margin-left:0.3em; margin-right:0.2em" id="searchTaskStatus" title="Logout" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); logout()">
            	<img src="images/database.png" style="margin-left:0.3em; margin-right:0.2em" id="showDatabase" title="Developer" data-state="0" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); toggleDatabase()">
            	<select id="cmbDebug" onchange="setDebugModule()">
            		<option value=0>None</option>
            		<option value=1>customer</option>
            		<option value=2>contact</option>
            		<option value=3>task</option>
            		<option value=4>taskLog</option>
            		<option value=5>relation</option>
            		<option value=6>attachment</option>
            		<option value=7>menu</option>
            		<option value=8>common</option>
            		<option value=9>login</option>
				</select>
            </td>                      
        </tr>
    </table>

	<table style="width: 100%;">
		<tr>
			<td class="cssMessageInfo" id="messageInfo">Ready</td>
		</tr>
	</table>
   	<table id="parentTaskList" class="Fixed">
		<tr>
			<td style="width: 5%;">Type</td>
			<td style="width: 70%; text-align: center;">Title</td>
			<td style="width: 12%;">Due date</td>
			<td style="width: 6%;">Effort</td>
			<td style="width: 10%;">Status</td>
		</tr>
	</table>  
	<br>  
    <table id="taskList" class="cssTaskList">
		<tbody>             
        </tbody>     
    </table>
    <hr>

    <table style="width: 100%;">
        <tbody>
		<tr>
			<td width="50%" valign="top">
				<div id="divTaskDetailsTop">
					<img src="images/site.png" id="imgTaskType" title="select Task type" data-state="0" onclick="menuHandler(menuData.taskType)">
					<select title="Task Type" id="cmbDetailTaskType" style="display:none;"></select>
					<select title="Task Status" id="cmbDetailStatus" style="display:none;"></select>
					<img src="images/status/new.png" id="imgTaskStatus" title="New" data-state="0" onclick="menuHandler(menuData.taskStatus)">
	            	<div id="divMenuTaskStatus">
	            		<img src="images/status/new.png" title="New" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskStatus, 1); menuHandler(menuData.taskStatus)"><br>
	            		<img src="images/status/running.png" title="Running" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskStatus, 2); menuHandler(menuData.taskStatus)"><br>
	            		<img src="images/status/delivered.png" title="Delivered" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskStatus, 3); menuHandler(menuData.taskStatus)"><br>
	            		<img src="images/status/closed.png" title="Closed" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskStatus, 4); menuHandler(menuData.taskStatus)"><br>
	            		<img src="images/status/onhold.png" title="On Hold" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskStatus, 5); menuHandler(menuData.taskStatus)"><br>
	            	</div>	
	            	<select title="Contact for this task(Usually you!)" id="cmbDetailContact"></select>
	            	<span id="lblTotalEffort" style="width: 4.5em; font-weight: bold; font-size: 0.8em;">Total effort: </span><span style="font-size: small" id="totalTaskEffort" title="Total effort for task and child tasks"></span>
	            	<img id="imgEffortStatus" src="images/state_unknown.png" style="border:0;">
	            	<img align="right" style="margin-left:0.5em;" src="images/add_task.png" title="Add a single task" id="addTask" data-state="0" onmousedown="toggleAsBotton(this)" onmouseup="menuHandler(menuData.newTaskType)">
	            	<img align="right" style="margin-left:0.5em;" src="images/add_child.png" title="Add a child to this task" id="addChildTask" data-parentTask="0" data-state="0" onclick="toggleState(this); setChildTask(this)">
	            	<img align="right" style="margin-left:0.5em;"  src="images/add_project.png" title="Add full project" id="addProject" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this)">
	            	<br>
	            	<div style="margin-left:25.9em;" id="divMenuNewTaskType">
	            		<img src="images/tasklist/project.png" title="new project task" onclick="menuSetter(menuData.newTaskType, 1); menuHandler(menuData.newTaskType)"><br>
	            		<img src="images/tasklist/requirements.png" title="new requirement task" onclick="menuSetter(menuData.newTaskType, 2); menuHandler(menuData.newTaskType)"><br>
	            		<img src="images/tasklist/design.png" title="new design task" onclick="menuSetter(menuData.newTaskType, 3); menuHandler(menuData.newTaskType)"><br>
	            		<img src="images/tasklist/develop.png" title="new development task" onclick="menuSetter(menuData.newTaskType, 4); menuHandler(menuData.newTaskType)"><br>
	            		<img src="images/tasklist/qa.png" title="new qa task" onclick="menuSetter(menuData.newTaskType, 5); menuHandler(menuData.newTaskType)"><br>
	            		<img src="images/tasklist/delivery.png" title="new delivery task" onclick="menuSetter(menuData.newTaskType, 6); menuHandler(menuData.newTaskType)"><br>
	            		<img src="images/tasklist/support.png" title="new support task" onclick="menuSetter(menuData.newTaskType, 7); menuHandler(menuData.newTaskType)	">
	            	</div>	            	
				</div>
				
            	<div id="divMenuTaskType">
            		<img src="images/tasklist/project.png" title="new project task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 1); menuHandler(menuData.taskType)"><br>
            		<img src="images/tasklist/requirements.png" title="new requirement task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 2); menuHandler(menuData.taskType)"><br>
            		<img src="images/tasklist/design.png" title="new design task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 3); menuHandler(menuData.taskType)"><br>
            		<img src="images/tasklist/develop.png" title="new development task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 4); menuHandler(menuData.taskType)"><br>
            		<img src="images/tasklist/qa.png" title="new qa task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 5); menuHandler(menuData.taskType)"><br>
            		<img src="images/tasklist/delivery.png" title="new delivery task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 6); menuHandler(menuData.taskType)"><br>
            		<img src="images/tasklist/support.png" title="new support task" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskType, 7); menuHandler(menuData.taskType)">
            	</div>				
				<textarea title="Task title" id="txtDetailTaskTitle" rows="2" cols="80" tabindex="1"></textarea>
				<br>
				<div id="divTaskDetailsBottom">
					<label for="txtDetailEffort" class="cssFieldLabel" tabindex="2">Effort</label>
					<input title="Task effort (in hours/days/months)" type="number" id="txtDetailTaskEffort" min="1" value="1">
					<img title="hours" id="imgEffortUnit" style="margin: 0em" src="images/effortUnit_hours.png" data-state="0" onmousedown="toggleAsBotton(this)" onmouseup="menuHandler(menuData.taskEffortUnit)">
					<div id="divMenuEffortUnit">
						<img title="Effort is in hours" src="images/effortUnit_hours.png" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskEffortUnit, 1 ); menuHandler(menuData.taskEffortUnit)">
						<img title="Effort is in days" src="images/effortUnit_days.png" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskEffortUnit, 2); menuHandler(menuData.taskEffortUnit)">
						<img title="Effort is in months" src="images/effortUnit_months.png" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); menuSetter(menuData.taskEffortUnit, 3); menuHandler(menuData.taskEffortUnit)">
					</div>
					<input type="hidden" id="effortUnit" value="1">
	            	<span id="lblDetailDueDate" title="Set due date" class="cssFieldLabel" onclick="toggleSearchDate(this, getById('txtDetailDueDate'))">Due Date</span>				
					<input type="date" id="txtDetailDueDate" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"  data-isActive="0" onkeyup="flagToggle(getById('lblDetailDueDate'),this, event)" onblur="toggleSearchDate(getById('lblDetailDueDate'), getById('txtDetailDueDate'))" onchange="toggleSearchDate(getById('lblDetailDueDate'),this)"/> 
					<input type="hidden" id="taskId" value="0">    
	            	<img align="right" src="images/save_blue.png" title="Save task" id="imgSaveTask" onmousedown="toggleAsBotton(this)" onmouseup="saveTask(); toggleAsBotton(this)">
            	</div>
				<hr align="left" style="width:31em;">
				<span class="cssTabSelected" id="TabLog" onclick="setTab(tabEnum.taskLog)">Log</span>
				<span class="cssTab" id="TabRelation" onclick="setTab(tabEnum.relation)">Relation</span>
				<span class="cssTab" id="TabAttachment" onclick="setTab(tabEnum.attachment)">Attachments</span>
				<span class="cssTab" id="TabLinkedCustomer" onclick="setTab(tabEnum.linkedCustomer)">Linked Customers</span>
				<hr style="border-style: ridge;margin-top: 0.2em;margin-bottom: 0.2em;">
				<div id="divTaskTab"></div>				                    
			</td>
			<td valign="top" rowspan="2">			
				<div class="tabCRM">				
					<span id="tabConnection" class="cssTab" onclick="setTab(tabEnum.connection)">Connections</span>
					<span id="tabTimeline" class="cssTab" onclick="setTab(tabEnum.timeline)">Timeline</span>
					<span id="tabCustomer" class="cssTab" onclick="setTab(tabEnum.customer)">Customers</span>
					<span id="tabLogin" class="cssTab" onclick="setTab(tabEnum.login)">Logins</span>
					<hr style="border-style: ridge;margin-top: 0.2em;margin-bottom: 0.2em;">
	             	<div id="divDataFrame" style="align:right; display:none; font-size:small; float:left; position:relative; overflow-y: scroll; height:18em; width: 33m;">
	            		<textarea rows="3" cols="70" id="txtSQL">select * from task</textarea>
	            		<br>
	            		<img src="images/add_right.png" id="execSQL" title="Execute" onmousedown="toggleAsBotton(this)" onmouseup="toggleAsBotton(this); executeSQL()">
	            		
	            		<table>
	            			<thead id="resultHeader" style="font-size:x-small;"></thead>
	            			<tbody id="resultBody" style="background-image: url('images/textBackground_no_num.jpg');"></tbody>
	            		</table>
	            	</div>	
					<div id="divCRM"></div>
				</div>
			</td>
		</tr>           
        </tbody>
    </table>
</body>
</html>